---
import { stockMarket } from '@/lib/utils/stock-market'
import clsx from 'clsx'
import YahooFinance from 'yahoo-finance2'

export const prerender = false

const yahooFinance = new YahooFinance({})
const isMarketOpen = stockMarket.isMarketOpen()
const spy = await yahooFinance.quoteSummary('SPY')
const price = spy.price?.regularMarketPrice ?? 0
---

<div class={clsx('rounded-2xl px-4 py-1.5', isMarketOpen ? 'bg-green-500' : 'bg-red-500')}>
  <p>SPY ${price.toFixed(2)}</p>
</div>
